<ul role="tree">
	<li role="treeitem" ng-repeat="node in treeData track by node.id"
		ng-class="{parent_li: node.nodes.length > 0, hovered: attachHoverEffectClass[node.id], collapsed:isNodeCollapsed(node.id)}">
		<div class="btn-group" ng-if="::node.nodes.length == 0">
			<a class="btn"
			   ng-class="{'btn-success': isRecordSelected(node.recordId),'btn-default': !isRecordSelected(node.recordId),'disabled':!isNodeSelectable(node.id)}"
			   ng-click="toggleNodeSelected(node)" href="javascript:void(0)">
				{{::node.label}}
				<span ng-switch="isRecordSelected(node.recordId)">
					<i class="fa fa-fw fa-check delete" ng-switch-when="true"></i>
					<span ng-switch="isNodeSelectable(node.id)" ng-switch-when="false">
						<i class="fa fa-fw fa-check" ng-switch-when="true"></i>
						<i class="fa fa-fw fa-lock" ng-switch-when="false"></i>
					</span>
				</span>
			</a>
		</div>

		<div class="btn-group" ng-if="::node.nodes.length > 0">
			<a class="btn btn-default node" ng-mouseenter="attachHoverEffectClass[node.id] = true" ng-mouseleave="attachHoverEffectClass[node.id] = false"
			   ng-click="toggleNodeCollapse(node)" href="javascript:void(0)">
				<i class="fa fa-minus-circle"></i>
			</a>
			<a class="btn"
			   ng-class="{'btn-success': isRecordSelected(node.recordId),'btn-default': !isRecordSelected(node.recordId),'disabled':!isNodeSelectable(node.id)}"
			   ng-click="toggleNodeSelected(node)" href="javascript:void(0)">
				{{::node.label}}
				<span ng-switch="isRecordSelected(node.recordId)">
					<i class="fa fa-fw fa-check delete" ng-switch-when="true"></i>
					<span ng-switch="isNodeSelectable(node.id)" ng-switch-when="false">
						<i class="fa fa-fw fa-check" ng-switch-when="true"></i>
						<i class="fa fa-fw fa-lock" ng-switch-when="false"></i>
					</span>
				</span>
			</a>
		</div>
		<view-tree-select field-meta="::fieldMeta" 
						  tree-meta="::treeMeta" 
						  tree-data="::node.nodes" 
						  selected-tree-records="selectedTreeRecords" 
						  collapsed-tree-nodes="collapsedTreeNodes" 
						  selectable-node-ids="selectableNodeIds"
						  ng-if="::node.nodes.length > 0">
		</view-tree-select>
	</li>
</ul>