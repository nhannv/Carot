<div id="page-title">
	<div id="page-meta">
		<div class="aux-actions">
		</div>
		<div class="meta-icon">
			<i class="fa fa-fw fa-bar-chart fa-2x"></i>
		</div>
		<div class="meta-label">
			<div class="meta-label-aux">projects reports</div>
			<h4>Timelog</h4>
		</div>

	</div>
</div>
<div id="page-body">
	<div id="page-text">
		<div class="form">
			<div class="row">
				<div class="col-xs-2">
					<div class="form-group">
						<label class="control-label">year</label>
						<select class="form-control" ng-model="ngCtrl.selectedYear" ng-options="option.key as option.value for option in ngCtrl.years"></select>
					</div>
				</div>
				<div class="col-xs-3">
					<div class="form-group">
						<label class="control-label">month</label>
						<select class="form-control" ng-model="ngCtrl.selectedMonth" ng-options="option.key as option.value for option in ngCtrl.months"></select>
					</div>
				</div>
				<div class="col-xs-7">
					<div class="form-group">
						<label class="control-label">&nbsp;</label>
						<div>
						<a class="btn btn-primary" ng-click="ngCtrl.generateReport()">
							<span  ng-if="ngCtrl.loading"><i class="fa fa-spin fa-spinner"></i></span>
							<span  ng-if="!ngCtrl.loading"><i class="fa fa-cog"></i></span>
							Generate
						</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<table class="table table-bordered">
			<tr>
				<th width="200">Total billable</th>
				<td ng-bind="ngCtrl.totalBillable"></td>
			</tr>
			<tr>
				<th>Total not billable</th>
				<td ng-bind="ngCtrl.totalNotBillable"></td>
			</tr>
		</table>

		<div ng-repeat="project in ngCtrl.projects">
			<h3 ng-bind="project.name"></h3>
			<table class="table table-bordered">
				<thead>
					<tr>
						<th>subject</th>
						<th width="120">type</th>
						<th width="120">billable</th>
						<th width="120">not-billable</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="entry in project.entries">
						<td>
							<a target="_blank" href="/#/areas/projects/wv_task/view-general/sb/general/{{entry.id}}" ng-bind="entry.subject" ng-if="entry.type == 'task'"></a>
							<a target="_blank" href="/#/areas/projects/wv_bug/view-general/sb/general/{{entry.id}}" ng-bind="entry.subject" ng-if="entry.type == 'bug'"></a>
						</td>
						<td ng-bind="entry.type"></td>
						<td ng-bind="entry.billable"></td>
						<td ng-bind="entry.not_billable"></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>


