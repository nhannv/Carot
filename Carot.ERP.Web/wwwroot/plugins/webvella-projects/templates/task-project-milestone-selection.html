
<div ng-controller="CarotTaskProjectMilestoneController as taskPMTemplateCtrl">
	<div class="editable-wrapper input-group editable-updatable" ng-dblclick="taskPMTemplateCtrl.updateProjectMilestone()" ng-if="::taskPMTemplateCtrl.userCanUpdateMileStone()">
		<div class="form-control form-control-static">
			<span class="go-grey">Project:</span> {{taskPMTemplateCtrl.selectedProjectName}} <span class="divider">|</span> <span class="go-grey">Milestone:</span> {{taskPMTemplateCtrl.selectedMilestoneName || 'none'}}
		</div>
		<span class="input-group-addon" ng-click="taskPMTemplateCtrl.updateProjectMilestone()"><i class="fa fa-pencil fa-fw"></i></span>
	</div>
	<div class="editable-wrapper input-group editable-readonly" ng-if="::!taskPMTemplateCtrl.userCanUpdateMileStone()">
		<div class="form-control form-control-static">
			<span class="go-grey">Project:</span> {{taskPMTemplateCtrl.selectedProjectName}} <span class="divider">|</span> <span class="go-grey">Milestone:</span> {{taskPMTemplateCtrl.selectedMilestoneName || 'none'}}
		</div>
		<span class="input-group-addon"><i class="fa fa-lock fa-fw"></i></span>
	</div>
</div>

<script type="text/ng-template" id="changeProjectMilestoneModal.html">
	<div class="modal-header" id="modal-top">
		<button type="button" class="close" ng-click="popupCtrl.cancel('cancel')" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		<h3 class="modal-title">Change task milestone</h3>
	</div>
	<div class="modal-body">
		<form name="createListForm">
			<div class="row">
				<div class="col-sm-12">
					<div class="form-group">
						<label class="required">Project</label>
						<select class="form-control" ng-model="popupCtrl.project_id" ng-change="popupCtrl.projectChanged()" ng-disabled="!popupCtrl.userCanUpdateProject"
							ng-options="project.id as project.name for project in popupCtrl.myProjects"></select>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12">
					<div class="form-group">
						<label>Milestone</label>
						<select class="form-control" ng-model="popupCtrl.milestone_id" ng-options="milestone.id as milestone.name for milestone in popupCtrl.myProjectMilestones"></select>

					</div>
				</div>
			</div>
		</form>
	</div>
	<div class="modal-footer">
		<button class="btn btn-primary" ng-click="popupCtrl.ok()" translate="{{::'SAVE'}}"></button>
		<button class="btn btn-default" ng-click="popupCtrl.cancel()" translate="{{::'CANCEL'}}"></button>
	</div>
</script>